
{%load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Mathias Catholic Hospital {% endblock %}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="shortcut icon" href="{% static 'images/anothergrr.jpt'%}" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="Orbitor,business,company,agency,modern,bootstrap4,tech,software">
    <meta name="author" content="themefisher.com">

    <title>Mathias Catholic Hospital</title>

    <!-- Favicon -->

    <!-- bootstrap.min css -->
    <link rel="stylesheet" href="{% static 'plugins/bootstrap/css/bootstrap.min.css'%}">
    <!-- Icon Font Css -->
    <link rel="stylesheet" href="{% static 'plugins/icofont/icofont.min.css'%}">
    <!-- Slick Slider  CSS -->
    <link rel="stylesheet" href="{%static 'plugins/slick-carousel/slick/slick.css'%}">
    <link rel="stylesheet" href="{% static 'plugins/slick-carousel/slick/slick-theme.css'%}">

    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}"> 


</head>

<body>

    <header>
        <div class="header-top-bar">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-6">
                        <ul class="top-bar-info list-inline-item pl-0 mb-0">
                            <li class="list-inline-item"><a href="mailto:support@gmail.com"><i
                                        class="icofont-support-faq mr-2"></i>mathias@gmail.com</a></li>
                            <li class="list-inline-item"><i class="icofont-location-pin mr-2"></i>Address KWB124,Yeji
                            </li>
                        </ul>
                    </div>
                    <div class="col-lg-6">
                        <div class="text-lg-right top-right-bar mt-2 mt-lg-0">
                            <a href="tel:+23-345-67890">
                                <span>Call Now : </span>
                                <span class="h4">+233 596878044</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <nav class="navbar navbar-expand-lg navigation" id="navbar">
            <div class="container">
                <a class="navbar-brand" href="{% url 'index' %}">
                    <img src="{% static 'images/grrmathias.jpeg' %}" alt="" class="img-fluid"
                        style="width: 100px; ">
                </a>

                <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarmain"
                    aria-controls="navbarmain" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="icofont-navigation-menu"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarmain">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item active">
                            <a class="nav-link" href="{% url 'index' %}">Home</a>
                        </li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'gallery' %}">About Us</a></li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'services' %}">Services</a></li>

                        <li class="nav-item"><a class="nav-link" href="{% url 'testify' %}">Testify</a></li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'jobs' %}">Jobs</a></li>


                        {% if user.is_authenticated %}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="dropdown06" data-toggle="dropdown"
                                aria-haspopup="true" aria-expanded="false">
                                <i class="icofont-user"></i> {{ user.username }} <i class="icofont-thin-down"></i>
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="dropdown06">
                                {% if request.user.role.new_role == "Doctor" %}
                                <li><a class="dropdown-item" href="{% url 'doctor_patients' %}">My Patients</a></li>
                                <li><a class="dropdown-item" href="{% url 'doctor_page' %}">Doctors Dashboard</a></li>
                                {% else %}
                                {% endif %}
                                {% if request.user.role.new_role == "HR" %} 
                                <!-- <li><a class="dropdown-item" href="{% url 'doctor_patients' %}">My Patients</a></li> -->
                                <li><a class="dropdown-item" href="{% url 'hr_dashboard' %}">HR's Dashboard</a></li>
                                {% else %}
                                {% endif %}
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item" href="{% url 'logout' %}">Logout</a></li>
                            </ul>
                        </li>
                        {% else %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'login' %}">Login</a>
                        </li>
                        <li class="nav-item">
                            <a class="btn btn-primary" href="{% url 'appointment' %}">Book Appointment</a>
                        </li>
                        {% endif %}
                    </ul>
                </div>
            </div>
        </nav>
    </header>


{% if request.user.role.new_role == "Doctor" %}
       
<div class="container-fluid py-4" style="transform: translateY(40px);">
    {% if messages %}
    {% for message in messages %}
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            Swal.fire({
                icon: '{{ message.tags }}',
                title: '{{ message|escapejs }}',
                toast: true,
                position: 'top-end',
                showConfirmButton: false,
                timer: 3000,
                timerProgressBar: true,
                background: '#fff',
                iconColor: '{% if message.tags == "success" %}#28a745{% elif message.tags == "error" %}#dc3545{% elif message.tags == "warning" %}#ffc107{% else %}#17a2b8{% endif %}'
            });
        });
    </script>
    {% endfor %}
    {% endif %}

    <!-- Sidebar Toggle Button -->
    <button id="sidebarToggle" class="btn btn-primary">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Sidebar -->
    <div id="sidebar">
        <div class="card shadow-sm h-100">
            <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                <h5 class="m-0"><i class="fas fa-map-marker-alt"></i> Grrrrr</h5>
                <button id="closeSidebar" class="btn btn-sm btn-light">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li class="mb-3"><a href="{% url 'cancel_patient' %}"><i
                                class="fas fa-times text-danger me-2"></i>Cancelled</a></li>
                    <li class="mb-3"><a href="{% url 'approve_appointment' %}" class="mb-2"><i
                                class="fas fa-check text-success me-2"></i>Approved</a></li>
                    <li class="mb-3"><a href="{% url 'complete_patient'%}" class="mb-2"><i
                                class="fas fa-check-circle text-primary me-2"></i>Completed</a></li>
                    <li class="mb-3"><a href="{% url 'pending_patient' %}" class="mb-2"><i
                                class="fas fa-clock text-warning me-2"></i>Pending</a> </li>
                </ul>

            </div>
        </div>
    </div>

    <!-- Overlay for mobile -->
    <div id="sidebarOverlay" class="d-none"></div>

    <!-- Header Section -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h1 class="h3 mb-2">Appointment Dashboard</h1>
                    <p class="text-muted">Manage and view all patient appointments</p>
                </div>
                <div class="d-flex gap-2">
                    <a class="btn btn-primary" href="{% url 'doctor_patients' %}">
                        <i class="fas fa-user-plus me-2"></i>My patient
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Rest of your content remains the same -->
    <!-- Stats Cards -->
    <div class="row mb-4">
        <a href="{% url 'today_appointment'%}" class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                Today's Appointments
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ today_count }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-calendar-day fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </a>

        <!-- Other stat cards remain the same -->
        <div class="col-xl-3 col-md-6 mb-4">
            <a href="{% url 'cancel_patient' %}" class="card border-left-success shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">
                                cancelled
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ cancel_count }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-calendar-week fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </a>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <a href="{% url 'approve_appointment'%}" class="card border-left-success shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2"> 
                            <div class="text-xs font-weight-bold text-secondary text-uppercase mb-1">
                                approved
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ approved_count }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-calendar-week fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </a>
        </div>
        <div class="col-xl-3 col-md-6 mb-4">
            <a href="{% url 'complete_patient'%}" class="card border-left-success shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                Completed
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ complete_count }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-calendar-week fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </a>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <a href="{% url 'pending_patient'%}" class="card border-left-info shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                                Pending
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ pending_count }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-clock fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </a>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-warning shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                Total Patients
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ total_patients }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-users fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Filters and Search -->
    <div class="card shadow">
        <div class="card-body">
            <div class="row g-3">
                <div class="col-md-3">
                    <form action="" method="get">
                        <label class="form-label">Date</label>
                        <input type="date" class="form-control" name="date" id="dateFilter"
                            value="{{ date_filter|default:'' }}" onchange="this.form.submit()">
                    </form>
                </div>  
                <div class="col-md-3">
                    <form action="" method="get">
                        <label class="form-label">Status</label>
                        <select class="form-select" id="statusFilter" name="status" onchange="this.form.submit()">
                            <option value="" {% if not status_filter%} selected {%endif%}>All Status</option>
                            <option value="pending" {% if status_filter == "pending" %} selected {%endif%}>Pending
                            </option>
                            <option value="approved" {% if status_filter == "approved" %} selected {%endif%}>Approved
                            </option>
                            <option value="complete" {% if status_filter == "complete" %} selected {%endif%}>Completed
                            </option>
                            <option value="cancelled" {% if status_filter == "cancelled" %} selected {%endif%}>Cancelled
                            </option>
                        </select>
                    </form>
                </div>
                <div class="col-md-4">
                    <form action="" method="get">
                        <label class="form-label">Search Patient by Id</label>
                        <input type="text" class="form-control" name="id" placeholder="Search by Id or refrence...">
                </div>
                <div class="col-md-2 d-flex align-items-end">
                    <button type="submit" class="btn btn-primary w-100">
                        <i class="fas fa-filter me-2"></i>Filter
                    </button>
                </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Appointments Table -->
    <div class="row">
        <div class="col-12">
            <div class="card shadow">
                <div class="card-header py-3 d-flex justify-content-between align-items-center">
                    <h6 class="m-0 font-weight-bold text-primary">All Appointments</h6>
                    <span class="badge bg-primary">{{ appointments.count }} total</span>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead class="table-light">
                                <tr>
                                    <th>Patient</th>
                                    <th>Contact</th>
                                    <th>Date</th>
                                    <th>Complaint</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>

                                {% for appointment in appointments %}
                                <tr class="mb-3 {% if appointment.Status == 'complete' %}status-complete
                                {% elif appointment.Status == 'pending' %}status-pending    
                                {% elif appointment.Status == 'approved' %}status-approved   
                                {% elif appointment.Status == 'cancelled' %}status-cancelled{% endif %}">
                                    <td>
                                        <div class="d-flex align-items-center">
                                            <div class="avatar-circle bg-primary text-white me-3">
                                                {{ appointment.full_name|first|upper }}
                                            </div> 
                                            <div> 
                                                <h6 class="mb-0">{{ appointment.full_name }}</h6>
                                                <small class="text-muted">ID:{{ appointment.refrence}}</small>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div>
                                            <div class="text-primary">{{ appointment.phone_number }}</div>
                                            <small class="text-muted">{{ appointment.email }}</small>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="fw-bold" style="white-space: nowrap;">{{ appointment.date|date:"M d,Y"}}</div>
                                    </td> 
                                    <td>
                                        <div class="complaint-text">
                                            {{ appointment.Complain|truncatewords:8 }}
                                        </div>
                                    </td>

                                    <td>
                                        {% if appointment.Status == "complete" %}
                                        <span class="badge bg-success">Completed</span>
                                        {% elif appointment.Status == "pending" %}
                                        <span class="badge bg-warning">Pending</span>
                                        {% elif appointment.Status == "approved" %}
                                        <span class="badge bg-info">Approved</span>
                                        {% elif appointment.Status == "cancelled" %}
                                        <span class="badge bg-danger">Cancelled</span>
                                        {% endif %}
                                    </td>  
                                    
                                    <td>
                                        <div class="btn-group">
                                            <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal"
                                                data-bs-target="#detailModal{{ appointment.id }}" title="View">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            {% if appointment.Status == "pending" or appointment.Status == "cancelled"%}
                                            <button class="btn btn-sm btn-outline-success approve-btn" title="approve"
                                                onclick="confirmApproval({{ appointment.id }}, '{{ appointment.full_name|escapejs }}')">
                                                <i class="fas fa-check"></i>
                                            </button>
                                            {% endif %}
                                        </div>
                                    </td>
                                </tr>
                                {% empty %}
                                <tr>
                                    <td colspan="6" class="text-center py-4">
                                        <div class="empty-state">
                                            <i class="fas fa-calendar-times fa-3x text-muted mb-3"></i>
                                            <h5>No Appointments Found</h5>
                                            <p class="text-muted">There are no appointments scheduled yet.</p>
                                        </div>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>

                    <!-- Pagination -->
                    {% if appointments.has_other_pages %}
                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center">
                            {% if appointments.has_previous %}
                            <li class="page-item">
                                <a class="page-link" href="?page={{ appointments.previous_page_number }}">Previous</a>
                            </li>
                            {% endif %}

                            {% for num in appointments.paginator.page_range %}
                            <li class="page-item {% if appointments.number == num %}active{% endif %}">
                                <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                            </li>
                            {% endfor %}

                            {% if appointments.has_next %}
                            <li class="page-item">
                                <a class="page-link" href="?page={{ appointments.next_page_number }}">Next</a>
                            </li>
                            {% endif %}
                        </ul>
                    </nav>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- Upcoming Appointments -->
    <div class="row mt-4">
        <div class="col-lg-6">
            <div class="card shadow">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Today's Schedule</h6>
                </div>
                <div class="card-body">
                    {% for appointment in today_appointments %}
                    <div class="timeline-item mb-3">
                        <div class="d-flex align-items-center">
                            <div class="timeline-badge bg-primary text-white">
                                {{ appointment.time|time:"g:i" }}
                            </div>
                            <div class="ms-3 flex-grow-1">
                                <h6 class="mb-0">{{ appointment.full_name }}</h6>
                                <small class="text-muted">{{ appointment.Complain|truncatewords:4 }}</small>
                            </div>
                            <div class="btn-group">
                                {% if appointment.Status == "pending" or appointment.Status == "cancelled" %}
                                <button class="btn btn-sm btn-outline-success approve-btn"
                                    onclick="confirmApproval({{ appointment.id }}, '{{ appointment.full_name|escapejs }}')">
                                    <i class="fas fa-check"></i>
                                </button>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {% empty %}
                    <div class="text-center py-3">
                        <i class="fas fa-check-circle fa-2x text-success mb-2"></i>
                        <p class="text-muted mb-0">No appointments scheduled for today</p>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="col-lg-6">
            <a href="{% url 'doctor_patients' %}" class="row g-3 d-flex justify-content-center mt-4">
                <div class="col-md-6">
                    <div class="card bg-primary text-white text-center action-card">
                        <div class="card-body">
                            <i class="fas fa-user-plus fa-2x mb-2"></i>
                            <h6>My patients</h6>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </div>
</div>

<!-- Detail Modals (Moved outside main container to fix z-index issues) -->
{% for appointment in appointments %}
<div class="modal fade" id="detailModal{{ appointment.id }}" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Appointment Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>Patient Information</h6>
                        <p><strong>Name:</strong> {{ appointment.full_name }}</p>
                        <p><strong>Phone:</strong> {{ appointment.phone_number }}</p>
                        <p><strong>Email:</strong> {{ appointment.email }}</p>
                    </div>
                    <div class="col-md-6">
                        <h6>Appointment Details</h6>
                        <p><strong>Date:</strong> {{ appointment.date|date:"F d, Y" }}</p>
                        <p><strong>Reference:</strong>{{ appointment.refrence }}</p>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12">
                        <h6>Patient Complaint</h6>
                        <div class="card bg-light">
                            <div class="card-body">
                                {{ appointment.Complain }}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12">
                        <h6>Doctor Approved</h6>
                        <div class="card bg-light">
                            <div class="card-body">
                                {% if appointment.Doctor %}
                                {{ appointment.Doctor.username }}
                                {% else %}
                                Not assigned yet
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
{% endfor %}

<!-- Hidden Form for Approval -->
<form id="approveForm" method="post" style="display: none;">
    {% csrf_token %}
    <input type="hidden" name="appointment_id" id="appointmentIdInput">
</form>

<style>
    .avatar-circle {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 14px;
    }

    .complaint-text {
        max-width: 200px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    .timeline-badge {
        width: 60px;
        height: 30px;
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: bold;
    }

    .action-card {
        cursor: pointer;
        transition: transform 0.2s;
        height: 100px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .action-card:hover {
        transform: translateY(-5px);
    }

    .empty-state {
        padding: 2rem 0;
    }

    .border-left-primary {
        border-left: 4px solid #4e73df !important;
    }

    .border-left-success {
        border-left: 4px solid #1cc88a !important;
    }

    .border-left-info {
        border-left: 4px solid #36b9cc !important;
    }

    .border-left-warning {
        border-left: 4px solid #f6c23e !important;
    }

    .card {
        border: none;
        border-radius: 10px;
    }

    .table th {
        border-top: none;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.8rem;
        letter-spacing: 0.5px;
    }

    /* Fix modal z-index issues */
    .modal {
        z-index: 1060 !important;
    }

    .modal-backdrop {
        z-index: 1050 !important;
    }

    /* Toggleable sidebar - Mobile responsive */
    #sidebar {
        position: fixed;
        left: -300px;
        top: -120px;
        bottom: 120px;
        width: 280px;
        z-index: 1000;
        background-color: white;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
        transition: left 0.3s ease-in-out;
        overflow-y: auto;
        border-radius: 10px;
        /* Added rounded corners */
        margin: 10px 0;
        /* Added margin for better spacing */
    }

    #sidebar.show {
        left: 0;
    }

    #sidebarToggle {
        position: fixed;
        left: 20px;
        top: -40px;
        z-index: 999;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
    }

    #sidebarToggle:hover {
        background-color: #0056b3;
        transform: scale(1.1);
    }

    #sidebarOverlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 999;
        display: none;
    }

    #sidebarOverlay.show {
        display: block;
    }

    .status-complete {
        background-color: #198754  ;
        color: white;
    }

    .status-pending {
        background-color: #ffc107  ;
        color: black;
    }

    .status-approved {
        background-color: #0dcaf0  ;
        color: black;
    }

    .status-cancelled {
        background-color: #dc3545  ;
        color: white;
    }


    @media (max-width: 768px) {
        #sidebar {
            width: 80%;
            left: -80%;
            top: -100px;
            bottom: -100px;
        }

        #sidebarToggle {
            left: 10px;
            top: 20px;
            /* Adjust for mobile */
            width: 40px;
            height: 40px;
        }
    }

    @media (max-width: 500px) {
        #sidebar {
            width: 85%;
            left: -85%;
            top: 5px;
            /* Adjust for mobile */
            bottom: 5px;
            /* Adjust for mobile */
        }
    }
</style>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Sidebar functionality
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebarToggle');
        const closeSidebar = document.getElementById('closeSidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');

        // Toggle sidebar
        sidebarToggle.addEventListener('click', function () {
            sidebar.classList.add('show');
            sidebarOverlay.classList.add('show');
        });

        // Close sidebar
        function closeSidebarFunc() {
            sidebar.classList.remove('show');
            sidebarOverlay.classList.remove('show');
        }

        closeSidebar.addEventListener('click', closeSidebarFunc);
        sidebarOverlay.addEventListener('click', closeSidebarFunc);

        // Close sidebar with Escape key
        document.addEventListener('keydown', function (event) {
            if (event.key === 'Escape') {
                closeSidebarFunc();
            }
        });

        // Filter functionality
        const dateFilter = document.getElementById('dateFilter');
        const statusFilter = document.getElementById('statusFilter');

        // Set today as default for date filter
        const today = new Date().toISOString().split('T')[0];
        if (!dateFilter.value) {
            dateFilter.value = today;
        }

        // Add hover effects to table rows
        const tableRows = document.querySelectorAll('tbody tr');
        tableRows.forEach(row => {
            row.addEventListener('mouseenter', function () {
                this.style.backgroundColor = '#f8f9fa';
            });
            row.addEventListener('mouseleave', function () {
                this.style.backgroundColor = '';
            });
        });
    });

    // Confirm approval with SweetAlert
    function confirmApproval(appointmentId, patientName) {
        Swal.fire({
            title: 'Approve Appointment?',
            html: `<p>Are you sure you want to approve the appointment for <strong>${patientName}</strong>?</p>
                   <p class="text-success"><small>This will assign the patient to you.</small></p>`,
            icon: 'question',
            showCancelButton: true,
            confirmButtonColor: '#28a745',
            cancelButtonColor: '#6c757d',
            confirmButtonText: 'Yes, Approve Appointment',
            cancelButtonText: 'No, Cancel',
            reverseButtons: true,
            backdrop: true,
            allowOutsideClick: false,
            allowEscapeKey: false
        }).then((result) => {
            if (result.isConfirmed) {
                // Show loading state 
                Swal.fire({
                    title: 'Approving...', 
                    text: 'Please wait while we approve the appointment',
                    allowOutsideClick: false,
                    didOpen: () => {
                        Swal.showLoading();
                    }
                });

                // Submit the approval form
                setTimeout(() => {
                    document.getElementById('appointmentIdInput').value = appointmentId;
                    const form = document.getElementById('approveForm');
                    form.action = `/approve_appointment/${appointmentId}/`;
                    form.submit();
                }, 1000);
            }
        });
    }
</script>
   
{%else%}
<div class="fs-2 text-center">  Welcome OMO go back errr u are not a doctor aboa!ðŸ˜›</div>
{%endif%}
    <!-- footer Start -->
    <footer class="footer section gray-bg">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mr-auto col-sm-6">
                    <div class="widget mb-5 mb-lg-0">
                        <div class="logo mb-4">
                            <img src="{% static 'images/logo.png' %}" alt="" class="img-fluid">
                        </div>
                        <p>Tempora dolorem voluptatum nam vero assumenda voluptate, facilis ad eos obcaecati tenetur
                            veritatis eveniet distinctio possimus.</p>

                        <ul class="list-inline footer-socials mt-4">
                            <li class="list-inline-item"><a href="https://www.facebook.com/themefisher"><i
                                        class="icofont-facebook"></i></a></li>
                            <li class="list-inline-item"><a href="https://twitter.com/themefisher"><i
                                        class="icofont-twitter"></i></a></li>
                            <li class="list-inline-item"><a href="https://www.pinterest.com/themefisher/"><i
                                        class="icofont-linkedin"></i></a></li>
                        </ul>
                    </div>
                </div>

                <div class="col-lg-2 col-md-6 col-sm-6">
                    <div class="widget mb-5 mb-lg-0">
                        <h4 class="text-capitalize mb-3">Department</h4>
                        <div class="divider mb-4"></div>

                        <ul class="list-unstyled footer-menu lh-35">
                            <li><a href="#">Surgery </a></li>
                            <li><a href="#">Wome's Health</a></li>
                            <li><a href="#">Radiology</a></li>
                            <li><a href="#">Cardioc</a></li>
                            <li><a href="#">Medicine</a></li>
                        </ul>
                    </div>
                </div>

                <div class="col-lg-2 col-md-6 col-sm-6">
                    <div class="widget mb-5 mb-lg-0">
                        <h4 class="text-capitalize mb-3">Support</h4>
                        <div class="divider mb-4"></div>

                        <ul class="list-unstyled footer-menu lh-35">
                            <li><a href="#">Terms & Conditions</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                            <li><a href="#">Company Support </a></li>
                            <li><a href="#">FAQuestions</a></li>
                            <li><a href="#">Company Licence</a></li>
                        </ul>
                    </div>
                </div>

                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="widget widget-contact mb-5 mb-lg-0">
                        <h4 class="text-capitalize mb-3">Get in Touch</h4>
                        <div class="divider mb-4"></div>

                        <div class="footer-contact-block mb-4">
                            <div class="icon d-flex align-items-center">
                                <i class="icofont-email mr-3"></i>
                                <span class="h6 mb-0">Support Available for 24/7</span>
                            </div>
                            <h4 class="mt-2"><a href="tel:+23-345-67890">Support@email.com</a></h4>
                        </div>

                        <div class="footer-contact-block">
                            <div class="icon d-flex align-items-center">
                                <i class="icofont-support mr-3"></i>
                                <span class="h6 mb-0">Mon to Fri : 08:30 - 18:00</span>
                            </div>
                            <h4 class="mt-2"><a href="tel:+23-345-67890">+233 596878044</a></h4>
                        </div>
                    </div>
                </div>
            </div>

            <div class="footer-btm py-4 mt-5">
                <div class="row align-items-center justify-content-between">
                    <div class="col-lg-6">
                        <div class="copyright">
                            <span id="currentYear"></span> &copy; Copyright Reserved to <span class="text-color">Mathias
                                Catholic
                                Hospital,Yeji</span>Power by IT departement SALIM

                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="subscribe-form text-lg-right mt-5 mt-lg-0">
                            <form action="#" class="subscribe" method="post">
                                {%csrf_token%}
                                <input type="text" class="form-control" name="subscribemails"
                                    placeholder="Your Email address" required>
                                <button type="submit" class="btn btn-main-2 btn-round-full">Subscribe</a>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-4">
                        <a class="backtop js-scroll-trigger" href="#top">
                            <i class="icofont-long-arrow-up"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </footer>



    <!-- 
    Essential Scripts
    =====================================-->

    <!-- auto typing -->

    <!-- Main jQuery -->
    <script src="{% static 'plugins/jquery/jquery.js'%}"></script>
    
    <!-- auto-typing  -->
    <script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js"></script>

    <!-- Bootstrap 4.3.2 -->
    <script src="{% static 'plugins/bootstrap/js/popper.js'%}"></script>
    <script src=" {% static 'plugins/bootstrap/js/bootstrap.min.js'%}"></script>
    <script src="{% static 'plugins/counterup/jquery.easing.js'%} "></script>


    <!-- Slick Slider -->
    <script src="{% static 'plugins/slick-carousel/slick/slick.min.js'%} "></script>
    <!-- Counterup -->
    <script src="{% static ' plugins/counterup/jquery.waypoints.min.js' %}"></script>

    <script src="{% static 'plugins/shuffle/shuffle.min.js'%}"></script>
    <script src="{% static ' plugins/counterup/jquery.counterup.min.js'%}"></script>
   
    <script src="{% static 'js/script.js' %}"></script>
    <script src="{% static 'js/contact.js' %} "></script>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script>
        AOS.init();
    </script>
    <script>

        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // Navbar scroll effect
        // window.addEventListener('scroll', function () {
        //     const navbar = document.querySelector('.navbar');
        //     if (window.scrollY > 50) {
        //         navbar.classList.add('navbar-scrolled');
        //     } else {
        //         navbar.classList.remove('navbar-scrolled');
        //     }
        // });

        // Add active class to current page in navbar
        document.addEventListener('DOMContentLoaded', function () {
            const currentLocation = location.pathname;
            const navLinks = document.querySelectorAll('.nav-link');

            navLinks.forEach(link => {
                if (link.getAttribute('href') === currentLocation) {
                    link.classList.add('active');
                }
            });
        });

      

    </script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/yourkitid.js" crossorigin="anonymous"></script>

</body>



</html>

